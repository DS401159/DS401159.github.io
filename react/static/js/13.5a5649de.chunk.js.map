{"version":3,"sources":["scripts/views/login/index.js","scripts/actions/index.js"],"names":["phonereg","num","timer","showToastNoMask","msg","hide","info","Login","connect","getcode","test","mobile","state","value","setInterval","setState","txt","codeflag","clearInterval","axios","post","then","res","handleSubmit","e","preventDefault","props","form","validateFields","err","values","code","data","type","sessionStorage","token","dispatch","getuser","url","history","push","getFieldDecorator","this","className","style","textAlign","fontWeight","color","onSubmit","Item","rules","required","message","pattern","ref","el","prefix","placeholder","gutter","span","backgroundColor","onClick","disabled","htmlType","margin","Component","Form","create","name","getbj","a","get","payload","result","getkj","getqt"],"mappings":"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","file":"static/js/13.5a5649de.chunk.js","sourcesContent":["\r\nimport './index.scss'\r\nimport { history, axios } from '&'\r\nimport { Form, Icon, Input, Button, Row, Col } from 'antd';\r\nimport {connect} from 'react-redux'\r\nimport { getkj,getbj,getuser} from '../../actions';\r\nvar phonereg = /^1(3|5|7|8|9)\\d{9}$/\r\nvar num = 10\r\nvar timer = null\r\nimport {Toast} from 'antd-mobile'\r\n\r\nexport function showToastNoMask(msg) {\r\n    Toast.hide();\r\n    Toast.info(msg, 2, null, false);\r\n  }\r\n@connect()\r\nclass Login extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            txt: '获取验证码',\r\n            codeflag: false,\r\n            num\r\n        }\r\n    }\r\n    getcode = () => {\r\n        if (phonereg.test(this.mobile.state.value)) {\r\n            timer = setInterval(() => {\r\n                if (this.state.num > 0) {\r\n                    this.state.num--\r\n                    this.setState({\r\n                        txt: '还剩' + this.state.num + 's',\r\n                        codeflag: true\r\n                    })\r\n                } else {\r\n                    clearInterval(timer)\r\n                    this.setState({\r\n                        txt: '获取验证码',\r\n                        codeflag: false,\r\n                        num\r\n                    })\r\n                }\r\n            }, 1000)\r\n            axios.post('/react/getcode', { mobile: this.mobile.state.value }).then(res => {\r\n            })\r\n        }else{\r\n            clearInterval(timer)\r\n        }\r\n    }\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        this.props.form.validateFields((err, values) => {\r\n            if (!err) {\r\n                axios.post('/react/login', {\r\n                    mobile: values.mobile,\r\n                    code: values.code\r\n                }).then(res => {\r\n                    if(!!res.data.type){\r\n                        sessionStorage.token = res.data.token\r\n                        this.props.dispatch(getuser({url:'/react/getuser'}))\r\n                        history.push('/home/showscore')\r\n                    }else{\r\n                        showToastNoMask(res.data.msg)\r\n                    }\r\n                   \r\n                })\r\n            }\r\n        });\r\n    }\r\n    render() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        var { txt, codeflag } = this.state\r\n        return (\r\n            <div className='login0'>\r\n                <div className='login'>\r\n                    <h1 style={{ textAlign: 'center', fontWeight: 'bold',color:\"#fff\" }}>欢迎登录</h1>\r\n                    <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n                        <Form.Item>\r\n                            {getFieldDecorator('mobile', {\r\n                                rules: [{ required: true, message: '请输入手机号' },\r\n                                { pattern: /^1(3|5|7|8|9)\\d{9}$/, message: '请输入正确的手机号' }\r\n                                ],\r\n                            })(\r\n                                <Input\r\n                                    ref={el => this.mobile = el}\r\n                                    prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                    placeholder=\"请输入手机号\"\r\n                                />,\r\n                            )}\r\n                        </Form.Item>\r\n                        <Form.Item >\r\n                            <Row gutter={12}>\r\n                                <Col span={14}>\r\n                                    {getFieldDecorator('code', {\r\n                                        rules: [{ required: true, message: '请输入验证码' },\r\n                                        { pattern: /^\\d{4}$/, message: '请输入正确的验证码' }\r\n                                        ],\r\n                                    })(<Input\r\n                                        ref={el => this.code = el}\r\n                                        prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                        type=\"password\"\r\n                                        placeholder=\"请输入验证码\"\r\n                                    />)}\r\n                                </Col>\r\n                                <Col span={8}>\r\n                                    <Button style={{ backgroundColor: 'skyblue' }} onClick={this.getcode} disabled={codeflag}>{txt}</Button>\r\n                                </Col>\r\n                            </Row>\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" style={{ margin: '0 94px' }}>\r\n                                登录\r\n                        </Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Form.create({ name: 'normal_login' })(Login);","\r\nimport {axios} from '&'\r\nexport async function getbj({url}){\r\n    var res=await axios.get(url)\r\n    return{\r\n        type:'getbj',\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\nexport async function getkj({url}){\r\n    var res=await axios.get(url)\r\n    return{\r\n        type:'getkj',\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\nexport async function getqt({url}){\r\n    var res=await axios.get(url)\r\n    return{\r\n        type:'getqt',\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\nexport async function getuser({url}){\r\n    var res=await axios.get(url)\r\n    return{\r\n        type:'getuser',\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n\r\n"],"sourceRoot":""}